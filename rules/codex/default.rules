prefix_rule(pattern=["C:\\Program Files\\PowerShell\\7\\pwsh.exe", "-Command", "python C:\\Users\\IOT\\.codex\\skills\\.system\\skill-installer\\scripts\\install-skill-from-github.py --repo openai/skills --path skills/.curated/gh-fix-ci"], decision="allow")
prefix_rule(pattern=["C:\\Program Files\\PowerShell\\7\\pwsh.exe", "-Command", "python C:\\Users\\IOT\\.codex\\skills\\.system\\skill-installer\\scripts\\install-skill-from-github.py --repo openai/skills --path skills/.curated/notion-meeting-intelligence --path skills/.curated/notion-research-documentation --path skills/.curated/notion-spec-to-implementation"], decision="allow")
prefix_rule(pattern=["C:\\Program Files\\PowerShell\\7\\pwsh.exe", "-Command", "python C:\\Users\\IOT\\.codex\\skills\\.system\\skill-installer\\scripts\\install-skill-from-github.py --repo openai/skills --path skills/.curated/notion-meeting-intelligence"], decision="allow")
prefix_rule(pattern=["C:\\Program Files\\PowerShell\\7\\pwsh.exe", "-Command", "cmd /c dir /s /b .codex | findstr /i \"rule\""], decision="allow")
prefix_rule(pattern=["C:\\Program Files\\PowerShell\\7\\pwsh.exe", "-Command", "cmd /c findstr /s /i /n \"Global Development Rules\" .codex\\*.md"], decision="allow")
prefix_rule(pattern=["C:\\Program Files\\PowerShell\\7\\pwsh.exe", "-Command", "git commit -m \"feat(llm): migrate to vllm openai client\" -m \"Remove LiteLLM artifacts and add vLLM scripts/config\" -m \"Update gateway/providers/env settings and streaming support\" -m \"Expand tests + coverage config to 95% and refresh docs\""], decision="allow")
prefix_rule(pattern=["C:\\Program Files\\PowerShell\\7\\pwsh.exe", "-Command", "docker compose -f vllm-server\\docker-compose.yml -f vllm-server\\docker-compose.bench.yml up -d --no-deps vllm"], decision="allow")
prefix_rule(pattern=["C:\\Program Files\\PowerShell\\7\\pwsh.exe", "-Command", "docker compose logs voiceagent | rg -n \"tts_pyttsx3|PiperTTS|piper\" | Select-Object -Last 60"], decision="allow")
prefix_rule(pattern=["C:\\Program Files\\PowerShell\\7\\pwsh.exe", "-Command", "docker compose ps"], decision="allow")
prefix_rule(pattern=["C:\\Program Files\\PowerShell\\7\\pwsh.exe", "-Command", "docker inspect -f '{{.State.Status}} {{if .State.Health}}{{.State.Health.Status}}{{end}}' sglang-server"], decision="allow")
prefix_rule(pattern=["C:\\Program Files\\PowerShell\\7\\pwsh.exe", "-Command", "docker compose logs --tail 300 sglang"], decision="allow")
prefix_rule(pattern=["C:\\Program Files\\PowerShell\\7\\pwsh.exe", "-Command", "docker inspect -f '{{json .State.Health.Log}}' sglang-server"], decision="allow")
prefix_rule(pattern=["C:\\Program Files\\PowerShell\\7\\pwsh.exe", "-Command", "docker exec sglang-server sh -lc \"python - <<'PY'\nimport os\nfrom huggingface_hub import HfApi\n\ndef check(name, token):\n    print(f'[{name}] present={bool(token)} len={len(token) if token else 0}')\n    if not token:\n        return\n    api=HfApi(token=token)\n    try:\n        me=api.whoami()\n        ident = me.get('name') or me.get('email') or 'ok'\n        print(f'[{name}] whoami=OK ({ident})')\n    except Exception as e:\n        print(f'[{name}] whoami=FAIL {type(e).__name__}: {str(e)[:160]}')\n        return\n    repo='twinkle-ai/Llama-3.2-3B-F1-Instruct'\n    try:\n        api.model_info(repo)\n        print(f'[{name}] model_access=OK ({repo})')\n    except Exception as e:\n        print(f'[{name}] model_access=FAIL {type(e).__name__}: {str(e)[:200]}')\n\ncheck('HF_TOKEN', os.getenv('HF_TOKEN'))\ncheck('HUGGINGFACE_HUB_TOKEN', os.getenv('HUGGINGFACE_HUB_TOKEN'))\nprint('[SGLANG_API_KEY] present=', bool(os.getenv('SGLANG_API_KEY')))\nPY\""], decision="allow")
prefix_rule(pattern=["C:\\Program Files\\PowerShell\\7\\pwsh.exe", "-Command", "docker exec sglang-server sh -lc \"python - <<'PY'\nimport os\nfrom huggingface_hub import HfApi\n\ntoken=os.getenv('HF_TOKEN')\nprint('HF_TOKEN_present=', bool(token), 'len=', len(token) if token else 0)\n\napi=HfApi(token=token)\ntry:\n    me=api.whoami()\n    ident = me.get('name') or me.get('email') or 'ok'\n    print('whoami=OK', ident)\nexcept Exception as e:\n    print('whoami=FAIL', type(e).__name__, str(e)[:200])\n\nrepo='twinkle-ai/Llama-3.2-3B-F1-Instruct'\ntry:\n    api.model_info(repo)\n    print('model_access=OK', repo)\nexcept Exception as e:\n    print('model_access=FAIL', type(e).__name__, str(e)[:240])\nPY\""], decision="allow")
prefix_rule(pattern=["C:\\Program Files\\PowerShell\\7\\pwsh.exe", "-Command", "docker exec sglang-server sh -lc \"python - <<'PY'\nimport os\nimport requests\n\nrepo='twinkle-ai/Llama-3.2-3B-F1-Instruct'\nurl=f'https://huggingface.co/{repo}/resolve/main/config.json'\nheaders={}\ntoken=os.getenv('HF_TOKEN')\nif token:\n    headers['Authorization']=f'Bearer {token}'\nr=requests.get(url, headers=headers, timeout=20)\nprint('status=', r.status_code)\nprint('body_prefix=', r.text[:160].replace('\\n',' '))\nPY\""], decision="allow")
prefix_rule(pattern=["C:\\Program Files\\PowerShell\\7\\pwsh.exe", "-Command", "docker compose logs --tail 80 sglang"], decision="allow")
prefix_rule(pattern=["C:\\Program Files\\PowerShell\\7\\pwsh.exe", "-Command", "Start-Sleep -Seconds 120; docker inspect -f '{{.State.Status}} {{if .State.Health}}{{.State.Health.Status}}{{end}}' sglang-server"], decision="allow")
prefix_rule(pattern=["C:\\Program Files\\PowerShell\\7\\pwsh.exe", "-Command", "docker ps --format \"table {{.Names}}\\t{{.Image}}\\t{{.Ports}}\\t{{.Status}}\""], decision="allow")
prefix_rule(pattern=["C:\\Program Files\\PowerShell\\7\\pwsh.exe", "-Command", "docker compose ls"], decision="allow")
prefix_rule(pattern=["C:\\Program Files\\PowerShell\\7\\pwsh.exe", "-Command", "@'\nimport asyncio\nimport json\nimport os\nimport re\nimport time\nimport uuid\n\nimport aiohttp\n\nasync def main():\n    url = 'ws://localhost:9100/chat'\n    session_id = str(uuid.uuid4())\n    req = {\n        'prompt': '請用一段話介紹你能做什麼（50 字內），不要重複。',\n        'session_id': session_id,\n        'audio_format': 'pcm16_wav',\n        'sample_rate': 22050,\n        'channels': 1,\n    }\n\n    text_parts = []\n    llm_delta_count = 0\n\n    async with aiohttp.ClientSession() as client:\n        async with client.ws_connect(url, heartbeat=20) as ws:\n            await ws.send_str(json.dumps(req, ensure_ascii=False))\n\n            async for msg in ws:\n                if msg.type != aiohttp.WSMsgType.TEXT:\n                    continue\n                obj = json.loads(msg.data)\n                t = obj.get('type')\n                if t == 'llm_delta':\n                    d = obj.get('delta') or ''\n                    text_parts.append(d)\n                    llm_delta_count += 1\n                if t in ('llm_done', 'orchestrator_error', 'error', 'tts_end'):\n                    break\n\n    full = ''.join(text_parts)\n    # simple repetition heuristic: detect same 20-char window repeated >=3\n    rep = False\n    if len(full) >= 60:\n        w = full[:20]\n        rep = full.count(w) >= 3\n\n    print(json.dumps({\n        'session_id': session_id,\n        'llm_delta_count': llm_delta_count,\n        'full_text_len': len(full),\n        'repeat_window20x3': bool(rep),\n        'full_text_preview': full[:120],\n    }, ensure_ascii=False))\n\nasyncio.run(main())\n'@ | docker exec -i orchestrator python -"], decision="allow")
prefix_rule(pattern=["C:\\Program Files\\PowerShell\\7\\pwsh.exe", "-Command", "@'\nimport asyncio\nimport json\nimport uuid\n\nimport aiohttp\n\nPROMPT = '請用 1 段話介紹你能做什麼（可提到翻譯、語音生成、創作），但不要重複內容。'\n\nasync def main():\n    url = 'ws://localhost:9100/chat'\n    session_id = str(uuid.uuid4())\n    req = {\n        'prompt': PROMPT,\n        'session_id': session_id,\n        'audio_format': 'pcm16_wav',\n        'sample_rate': 22050,\n        'channels': 1,\n    }\n\n    deltas=[]\n    async with aiohttp.ClientSession() as client:\n        async with client.ws_connect(url, heartbeat=20) as ws:\n            await ws.send_str(json.dumps(req, ensure_ascii=False))\n            async for msg in ws:\n                if msg.type != aiohttp.WSMsgType.TEXT:\n                    continue\n                obj = json.loads(msg.data)\n                if obj.get('type')=='llm_delta':\n                    deltas.append(obj.get('delta') or '')\n                if obj.get('type') in ('llm_done','orchestrator_error','error','tts_end'):\n                    break\n\n    full=''.join(deltas)\n    print('delta_count=', len(deltas))\n    print('len=', len(full))\n\n    # detect repeated sentences split by '。' or '\\n'\n    parts=[p.strip() for p in full.replace('\\n','').split('。') if p.strip()]\n    seen={}\n    reps=[]\n    for p in parts:\n        seen[p]=seen.get(p,0)+1\n    for k,v in seen.items():\n        if v>=2:\n            reps.append((v,k))\n    reps.sort(reverse=True)\n    print('repeated_sentence_count=', len(reps))\n    if reps:\n        v,k=reps[0]\n        print('top_repeat_x=', v)\n        print('top_repeat_preview=', k[:60])\n\n    print('preview=', full[:200])\n\nasyncio.run(main())\n'@ | docker exec -i orchestrator python -"], decision="allow")
prefix_rule(pattern=["C:\\Program Files\\PowerShell\\7\\pwsh.exe", "-Command", "docker compose logs --tail 200 orchestrator"], decision="allow")
prefix_rule(pattern=["C:\\Program Files\\PowerShell\\7\\pwsh.exe", "-Command", "docker inspect -f '{{json .State.Health.Log}}' web"], decision="allow")
prefix_rule(pattern=["C:\\Program Files\\PowerShell\\7\\pwsh.exe", "-Command", "@'\nimport asyncio\nimport json\nimport uuid\n\nimport aiohttp\n\nasync def main():\n    url = 'ws://localhost:9100/chat'\n    session_id = str(uuid.uuid4())\n    req = {\n        'prompt': '介紹你自己，並列出你能做的事。',\n        'session_id': session_id,\n        'audio_format': 'pcm16_wav',\n        'sample_rate': 22050,\n        'channels': 1,\n    }\n\n    deltas=[]\n    async with aiohttp.ClientSession() as client:\n        async with client.ws_connect(url, heartbeat=20) as ws:\n            await ws.send_str(json.dumps(req, ensure_ascii=False))\n            async for msg in ws:\n                if msg.type != aiohttp.WSMsgType.TEXT:\n                    continue\n                obj = json.loads(msg.data)\n                if obj.get('type')=='llm_delta':\n                    deltas.append(obj.get('delta') or '')\n                if obj.get('type') in ('llm_done','orchestrator_error','error','tts_end'):\n                    break\n\n    full=''.join(deltas)\n    print(json.dumps({'len': len(full), 'preview': full[:200]}, ensure_ascii=False))\n\nasyncio.run(main())\n'@ | docker exec -i orchestrator python -"], decision="allow")
prefix_rule(pattern=["C:\\Program Files\\PowerShell\\7\\pwsh.exe", "-Command", "docker exec orchestrator sh -lc \"env | grep -E '^SGLANG_(SYSTEM_PROMPT|TEMPERATURE|TOP_P|TOP_K|REPETITION_PENALTY|MAX_TOKENS)=' | sort\""], decision="allow")
prefix_rule(pattern=["C:\\Program Files\\PowerShell\\7\\pwsh.exe", "-Command", "docker compose up -d --build --force-recreate orchestrator"], decision="allow")
prefix_rule(pattern=["C:\\Program Files\\PowerShell\\7\\pwsh.exe", "-Command", "docker exec orchestrator sh -lc \"env | grep -E '^SGLANG_(SYSTEM_PROMPT|TEMPERATURE|TOP_P|TOP_K|REPETITION_PENALTY|PRESENCE_PENALTY|FREQUENCY_PENALTY|MAX_TOKENS)=' | sort\""], decision="allow")
prefix_rule(pattern=["C:\\Program Files\\PowerShell\\7\\pwsh.exe", "-Command", "git add -A"], decision="allow")
prefix_rule(pattern=["C:\\Program Files\\PowerShell\\7\\pwsh.exe", "-Command", "git rm --cached hf-apt-key"], decision="allow")
prefix_rule(pattern=["C:\\Program Files\\PowerShell\\7\\pwsh.exe", "-Command", "Remove-Item -Force hf-apt-key"], decision="allow")
prefix_rule(pattern=["C:\\Program Files\\PowerShell\\7\\pwsh.exe", "-Command", "git add .gitignore"], decision="allow")
prefix_rule(pattern=["C:\\Program Files\\PowerShell\\7\\pwsh.exe", "-Command", "git commit -m \"feat: improve local debug workflow and reduce UI lag\""], decision="allow")
prefix_rule(pattern=["C:\\Program Files\\PowerShell\\7\\pwsh.exe", "-Command", "git push"], decision="allow")
prefix_rule(pattern=["C:\\Program Files\\PowerShell\\7\\pwsh.exe", "-Command", "docker logs --tail 120 sglang-server"], decision="allow")
prefix_rule(pattern=["C:\\Program Files\\PowerShell\\7\\pwsh.exe", "-Command", "Start-Sleep -Seconds 20; docker compose ps"], decision="allow")
prefix_rule(pattern=["C:\\Program Files\\PowerShell\\7\\pwsh.exe", "-Command", "Start-Sleep -Seconds 170; curl -i http://localhost:8082/health"], decision="allow")
prefix_rule(pattern=["C:\\Program Files\\PowerShell\\7\\pwsh.exe", "-Command", "docker inspect --format \"{{range .State.Health.Log}}{{.Start}} {{.ExitCode}} {{.Output}}{{end}}\" sglang-server"], decision="allow")
prefix_rule(pattern=["C:\\Program Files\\PowerShell\\7\\pwsh.exe", "-Command", "docker run --rm lmsysorg/sglang:latest python3 -m sglang.launch_server --help | rg -n \"quant|awq|gptq|gguf|bitsandbytes|bnb|int4|int8|fp8\""], decision="allow")
prefix_rule(pattern=["C:\\Program Files\\PowerShell\\7\\pwsh.exe", "-Command", "docker run --rm lmsysorg/sglang:latest python3 -m sglang.launch_server --help | rg -n \"gguf\" -n | Select-Object -First 120"], decision="allow")
prefix_rule(pattern=["C:\\Program Files\\PowerShell\\7\\pwsh.exe", "-Command", "docker run --rm lmsysorg/sglang:latest bash -lc \"command -v huggingface-cli && huggingface-cli --version\""], decision="allow")
prefix_rule(pattern=["C:\\Program Files\\PowerShell\\7\\pwsh.exe", "-Command", "curl -s https://huggingface.co/api/models/DevQuasar/twinkle-ai.Llama-3.2-3B-F1-Instruct-GGUF | python -c \"import sys, json; data=json.load(sys.stdin); files=[s['rfilename'] for s in data.get('siblings',[])]; gguf=[f for f in files if f.lower().endswith('.gguf')];\nprint('\\n'.join(gguf[:200]))\""], decision="allow")
prefix_rule(pattern=["C:\\Program Files\\PowerShell\\7\\pwsh.exe", "-Command", "docker compose up -d --force-recreate model_fetch sglang"], decision="allow")
prefix_rule(pattern=["C:\\Program Files\\PowerShell\\7\\pwsh.exe", "-Command", "docker logs --tail 80 sglang-model-fetch"], decision="allow")
prefix_rule(pattern=["C:\\Program Files\\PowerShell\\7\\pwsh.exe", "-Command", "Start-Sleep -Seconds 40; docker logs --tail 120 sglang-server"], decision="allow")
prefix_rule(pattern=["C:\\Program Files\\PowerShell\\7\\pwsh.exe", "-Command", "docker logs --tail 250 sglang-server"], decision="allow")
prefix_rule(pattern=["C:\\Program Files\\PowerShell\\7\\pwsh.exe", "-Command", "docker logs --tail 200 sglang-model-fetch"], decision="allow")
prefix_rule(pattern=["C:\\Program Files\\PowerShell\\7\\pwsh.exe", "-Command", "docker inspect --format \"{{.State.Health.Status}}\" sglang-server"], decision="allow")
prefix_rule(pattern=["C:\\Program Files\\PowerShell\\7\\pwsh.exe", "-Command", "docker inspect --format \"RestartCount={{.RestartCount}} StartedAt={{.State.StartedAt}} FinishedAt={{.State.FinishedAt}}\" sglang-server"], decision="allow")
prefix_rule(pattern=["C:\\Program Files\\PowerShell\\7\\pwsh.exe", "-Command", "docker logs --tail 200 sglang-server"], decision="allow")
prefix_rule(pattern=["C:\\Program Files\\PowerShell\\7\\pwsh.exe", "-Command", "docker inspect --format \"Health={{.State.Health.Status}} RestartCount={{.RestartCount}} OOMKilled={{.State.OOMKilled}} ExitCode={{.State.ExitCode}}\" sglang-server"], decision="allow")
prefix_rule(pattern=["C:\\Program Files\\PowerShell\\7\\pwsh.exe", "-Command", "docker logs --tail 120 sglang-model-fetch"], decision="allow")
prefix_rule(pattern=["C:\\Program Files\\PowerShell\\7\\pwsh.exe", "-Command", "docker compose up -d --force-recreate sglang"], decision="allow")
prefix_rule(pattern=["C:\\Program Files\\PowerShell\\7\\pwsh.exe", "-Command", "$deadline=(Get-Date).AddMinutes(8); while((Get-Date) -lt $deadline){ $ps=(docker compose ps --format json | ConvertFrom-Json); $sg=($ps | Where-Object {$_.Service -eq 'sglang'}); if($sg -and $sg.Health -eq 'healthy'){ break }; Start-Sleep -Seconds 10 }; docker compose ps"], decision="allow")
prefix_rule(pattern=["C:\\Program Files\\PowerShell\\7\\pwsh.exe", "-Command", "docker logs --tail 40 sglang-server"], decision="allow")
prefix_rule(pattern=["C:\\Program Files\\PowerShell\\7\\pwsh.exe", "-Command", "$deadline=(Get-Date).AddMinutes(8); while((Get-Date) -lt $deadline){ $health=(docker inspect -f '{{.State.Health.Status}}' sglang-server 2>$null); if($health -eq 'healthy'){ break }; Start-Sleep -Seconds 10 }; docker inspect -f '{{.State.Health.Status}}' sglang-server"], decision="allow")
prefix_rule(pattern=["C:\\Program Files\\PowerShell\\7\\pwsh.exe", "-Command", "docker logs --tail 60 sglang-server"], decision="allow")
prefix_rule(pattern=["C:\\Program Files\\PowerShell\\7\\pwsh.exe", "-Command", "docker logs -f --tail 20 sglang-model-fetch"], decision="allow")
prefix_rule(pattern=["C:\\Program Files\\PowerShell\\7\\pwsh.exe", "-Command", "$deadline=(Get-Date).AddMinutes(10); while((Get-Date) -lt $deadline){ $health=(docker inspect -f '{{.State.Health.Status}}' sglang-server 2>$null); if($health -eq 'healthy'){ break }; Start-Sleep -Seconds 10 }; docker inspect -f '{{.State.Health.Status}}' sglang-server"], decision="allow")
prefix_rule(pattern=["C:\\Program Files\\PowerShell\\7\\pwsh.exe", "-Command", "$deadline=(Get-Date).AddMinutes(10); while((Get-Date) -lt $deadline){ $health=(docker inspect -f '{{.State.Health.Status}}' sglang-server 2>$null); if($health -eq 'healthy'){ break }; if($health -eq 'unhealthy'){ break }; Start-Sleep -Seconds 10 }; docker compose ps"], decision="allow")
prefix_rule(pattern=["C:\\Program Files\\PowerShell\\7\\pwsh.exe", "-Command", "curl -s \"https://huggingface.co/api/models?search=twinkle-ai%2FLlama-3.2-3B-F1-Instruct%20AWQ&limit=20\" | python -c \"import sys, json; data=json.load(sys.stdin); print('\\n'.join([m['modelId'] for m in data[:20]]))\""], decision="allow")
prefix_rule(pattern=["C:\\Program Files\\PowerShell\\7\\pwsh.exe", "-Command", "curl -s \"https://huggingface.co/api/models?search=Llama-3.2-3B-F1-Instruct%20awq&limit=50\" | python -c \"import sys, json; data=json.load(sys.stdin); ids=[m['modelId'] for m in data];\nfor i in ids: print(i)\""], decision="allow")
prefix_rule(pattern=["C:\\Program Files\\PowerShell\\7\\pwsh.exe", "-Command", "$deadline=(Get-Date).AddMinutes(8); while((Get-Date) -lt $deadline){ $health=(docker inspect -f '{{.State.Health.Status}}' sglang-server 2>$null); if($health -eq 'healthy'){ break }; if($health -eq 'unhealthy'){ break }; Start-Sleep -Seconds 10 }; docker inspect -f '{{.State.Health.Status}}' sglang-server"], decision="allow")
prefix_rule(pattern=["C:\\Program Files\\PowerShell\\7\\pwsh.exe", "-Command", "docker inspect --format \"{{range .State.Health.Log}}{{.Start}} {{.ExitCode}} {{.Output}}{{end}}\" web"], decision="allow")
prefix_rule(pattern=["C:\\Program Files\\PowerShell\\7\\pwsh.exe", "-Command", "docker logs --tail 120 web"], decision="allow")
prefix_rule(pattern=["C:\\Program Files\\PowerShell\\7\\pwsh.exe", "-Command", "docker logs --tail 200 orchestrator"], decision="allow")
prefix_rule(pattern=["C:\\Program Files\\PowerShell\\7\\pwsh.exe", "-Command", "docker inspect --format \"{{range .Config.Env}}{{println .}}{{end}}\" orchestrator | Select-String -Pattern \"^SGLANG_(MODEL|SYSTEM_PROMPT|MAX_TOKENS|TEMPERATURE|TOP_P|TOP_K|REPETITION_PENALTY|BASE_URL)=\" | ForEach-Object {$_.Line}"], decision="allow")
prefix_rule(pattern=["C:\\Program Files\\PowerShell\\7\\pwsh.exe", "-Command", "docker compose up -d --force-recreate orchestrator web"], decision="allow")
prefix_rule(pattern=["C:\\Program Files\\PowerShell\\7\\pwsh.exe", "-Command", "docker inspect --format \"{{range .Config.Env}}{{println .}}{{end}}\" orchestrator | Select-String -Pattern \"^SGLANG_MODEL=\" | ForEach-Object {$_.Line}"], decision="allow")
prefix_rule(pattern=["C:\\Program Files\\PowerShell\\7\\pwsh.exe", "-Command", "docker inspect --format \"{{range .Config.Env}}{{println .}}{{end}}\" orchestrator | Select-String -Pattern \"^SGLANG_SYSTEM_PROMPT=\" | ForEach-Object {$_.Line}"], decision="allow")
prefix_rule(pattern=["C:\\Program Files\\PowerShell\\7\\pwsh.exe", "-Command", "docker logs sglang-server | Select-String -Pattern \"max_total_num_tokens=\" | Select-Object -Last 5"], decision="allow")
prefix_rule(pattern=["C:\\Program Files\\PowerShell\\7\\pwsh.exe", "-Command", "docker logs sglang-server | Select-String -Pattern \"max_total_num_tokens=\" | Select-Object -Last 20"], decision="allow")
prefix_rule(pattern=["C:\\Program Files\\PowerShell\\7\\pwsh.exe", "-Command", "docker run --rm lmsysorg/sglang:latest python3 -m sglang.launch_server --help | Select-String -Pattern \"max-total|allow-auto-truncate|max-prefill|max-running-requests\" -Context 0,2 | Select-Object -First 80"], decision="allow")
prefix_rule(pattern=["C:\\Program Files\\PowerShell\\7\\pwsh.exe", "-Command", "~/.codex/superpowers/.codex/superpowers-codex find-skills"], decision="allow")
prefix_rule(pattern=["C:\\Program Files\\PowerShell\\7\\pwsh.exe", "-Command", "git add .env.example .gitignore README.md docker-compose.yml docs/OPERATE.md"], decision="allow")
prefix_rule(pattern=["C:\\Program Files\\PowerShell\\7\\pwsh.exe", "-Command", "git commit -m \"feat: stabilize SGLang model loading and docs\""], decision="allow")
prefix_rule(pattern=["C:\\Program Files\\PowerShell\\7\\pwsh.exe", "-Command", "New-Item -ItemType Directory -Force .\\.tmp | Out-Null; if (Test-Path .\\.tmp\\superpowers) { Remove-Item -Recurse -Force .\\.tmp\\superpowers }; git clone --depth 1 https://github.com/obra/superpowers.git .\\.tmp\\superpowers"], decision="allow")
prefix_rule(pattern=["C:\\Program Files\\PowerShell\\7\\pwsh.exe", "-Command", "$installer=\"C:\\Users\\IOT\\.codex\\skills\\.system\\skill-installer\\scripts\\install-skill-from-github.py\"; $paths=(Get-ChildItem -Recurse -Force .\\.tmp\\superpowers\\skills -Directory | Where-Object { Test-Path (Join-Path $_.FullName 'SKILL.md') } | ForEach-Object { 'skills/' + $_.Name }); $paths | ForEach-Object { python $installer --repo obra/superpowers --path $_ }"], decision="allow")
prefix_rule(pattern=["C:\\Program Files\\PowerShell\\7\\pwsh.exe", "-Command", "docker compose up -d"], decision="allow")
prefix_rule(pattern=["C:\\Program Files\\PowerShell\\7\\pwsh.exe", "-Command", "docker compose logs --no-color --tail 200 sglang"], decision="allow")
prefix_rule(pattern=["C:\\Program Files\\PowerShell\\7\\pwsh.exe", "-Command", "docker inspect --format '{{json .State.Health}}' sglang-server"], decision="allow")
prefix_rule(pattern=["C:\\Program Files\\PowerShell\\7\\pwsh.exe", "-Command", "docker compose logs --no-color --tail 1200 sglang | Select-Object -Last 80"], decision="allow")
prefix_rule(pattern=["C:\\Program Files\\PowerShell\\7\\pwsh.exe", "-Command", "docker exec sglang-server bash -lc 'set -e; echo \"==ps==\"; ps aux | head -n 20; echo \"==disk==\"; df -h /root/.cache/huggingface /; echo \"==hf cache model dirs==\"; ls -1 /root/.cache/huggingface/hub | sed -n \"1,50p\"; echo \"==model snapshot==\"; ls -1 /root/.cache/huggingface/hub/models--twinkle-ai--Llama-3.2-3B-F1-Instruct/snapshots || true; echo \"==snapshot files (top 30)==\"; SNAP=$(ls -1 /root/.cache/huggingface/hub/models--twinkle-ai--Llama-3.2-3B-F1-Instruct/snapshots | head -n 1); if [ -n \"$SNAP\" ]; then ls -lah \"/root/.cache/huggingface/hub/models--twinkle-ai--Llama-3.2-3B-F1-Instruct/snapshots/$SNAP\" | head -n 40; fi'"], decision="allow")
prefix_rule(pattern=["C:\\Program Files\\PowerShell\\7\\pwsh.exe", "-Command", "docker compose up -d --force-recreate"], decision="allow")
prefix_rule(pattern=["C:\\Program Files\\PowerShell\\7\\pwsh.exe", "-Command", "docker compose logs --no-color --tail 120 sglang"], decision="allow")
prefix_rule(pattern=["C:\\Program Files\\PowerShell\\7\\pwsh.exe", "-Command", "docker ps --format \"table {{.Names}}\\t{{.Image}}\\t{{.Status}}\\t{{.Ports}}\""], decision="allow")
prefix_rule(pattern=["C:\\Program Files\\PowerShell\\7\\pwsh.exe", "-Command", "docker exec web sh -lc \"grep -n \\\"preLlmDone\\\" -n /usr/share/nginx/html/index.html || true; grep -n \\\"preToolCalls\\\" -n /usr/share/nginx/html/index.html || true\""], decision="allow")
prefix_rule(pattern=["C:\\Program Files\\PowerShell\\7\\pwsh.exe", "-Command", "cd \"C:\\.vscode\\detection_pose\"; docker compose up -d --build web"], decision="allow")
prefix_rule(pattern=["C:\\Program Files\\PowerShell\\7\\pwsh.exe", "-Command", "docker exec web sh -lc \"grep -n \\\"preLlmDone\\\" /usr/share/nginx/html/index.html && grep -n \\\"preToolCalls\\\" /usr/share/nginx/html/index.html\""], decision="allow")
prefix_rule(pattern=["C:\\Program Files\\PowerShell\\7\\pwsh.exe", "-Command", "docker exec web sh -lc \"ls -la /usr/share/nginx/html | sed -n '1,50p'; echo '---'; head -n 40 /usr/share/nginx/html/index.html\""], decision="allow")
prefix_rule(pattern=["C:\\Program Files\\PowerShell\\7\\pwsh.exe", "-Command", "docker exec web sh -lc \"grep -n \\\"Last llm_done\\\" /usr/share/nginx/html/index.html || true; grep -n \\\"Tool calls（accumulated）\\\" /usr/share/nginx/html/index.html || true; grep -n \\\"LLM transcript\\\" /usr/share/nginx/html/index.html | head\""], decision="allow")
prefix_rule(pattern=["C:\\Program Files\\PowerShell\\7\\pwsh.exe", "-Command", "docker exec web sh -lc \"sha256sum /usr/share/nginx/html/index.html\""], decision="allow")
prefix_rule(pattern=["C:\\Program Files\\PowerShell\\7\\pwsh.exe", "-Command", "docker exec web sh -lc \"grep -n preLlmDone /usr/share/nginx/html/index.html | head -n 5; echo 'grep_exit='$?; echo '---'; sed -n '270,310p' /usr/share/nginx/html/index.html\""], decision="allow")
prefix_rule(pattern=["C:\\Program Files\\PowerShell\\7\\pwsh.exe", "-Command", "docker logs orchestrator --tail 200"], decision="allow")
prefix_rule(pattern=["C:\\Program Files\\PowerShell\\7\\pwsh.exe", "-Command", "docker logs orchestrator --since 30m"], decision="allow")
prefix_rule(pattern=["C:\\Program Files\\PowerShell\\7\\pwsh.exe", "-Command", "docker exec orchestrator python -c \"import urllib.request; import sys;\\nurl='http://sglang:30000/health';\\nprint('GET',url);\\nprint(urllib.request.urlopen(url, timeout=5).read()[:200])\""], decision="allow")
prefix_rule(pattern=["C:\\Program Files\\PowerShell\\7\\pwsh.exe", "-Command", "docker exec orchestrator python -c \"import asyncio, aiohttp;\\nasync def main():\\n  url='ws://ws_gateway_tts:9000/tts';\\n  print('WS_CONNECT',url);\\n  async with aiohttp.ClientSession() as s:\\n    async with s.ws_connect(url, heartbeat=5, timeout=5) as ws:\\n      print('connected');\\n      await ws.close();\\nasyncio.run(main())\""], decision="allow")
prefix_rule(pattern=["C:\\Program Files\\PowerShell\\7\\pwsh.exe", "-Command", "docker exec orchestrator python -c \"import urllib.request; url='http://sglang:30000/health'; print('GET', url); print(urllib.request.urlopen(url, timeout=5).read()[:200])\""], decision="allow")
prefix_rule(pattern=["C:\\Program Files\\PowerShell\\7\\pwsh.exe", "-Command", "docker logs sglang-server --tail 120"], decision="allow")
prefix_rule(pattern=["C:\\Program Files\\PowerShell\\7\\pwsh.exe", "-Command", "docker inspect sglang-server --format \"status={{.State.Status}} health={{if .State.Health}}{{.State.Health.Status}}{{else}}(none){{end}} restart={{.RestartCount}}\""], decision="allow")
prefix_rule(pattern=["C:\\Program Files\\PowerShell\\7\\pwsh.exe", "-Command", "docker logs sglang-server --tail 40"], decision="allow")
prefix_rule(pattern=["C:\\Program Files\\PowerShell\\7\\pwsh.exe", "-Command", "cd \"C:\\.vscode\\detection_pose\"; docker compose up -d --force-recreate sglang"], decision="allow")
prefix_rule(pattern=["C:\\Program Files\\PowerShell\\7\\pwsh.exe", "-Command", "docker logs sglang-server --tail 60"], decision="allow")
prefix_rule(pattern=["C:\\Program Files\\PowerShell\\7\\pwsh.exe", "-Command", "docker logs sglang-server --tail 30 | rg \"mem_fraction_static\" -n || true"], decision="allow")
prefix_rule(pattern=["C:\\Program Files\\PowerShell\\7\\pwsh.exe", "-Command", "Start-Sleep -Seconds 210; docker logs sglang-server --tail 80"], decision="allow")
prefix_rule(pattern=["C:\\Program Files\\PowerShell\\7\\pwsh.exe", "-Command", "docker exec orchestrator python -c \"import urllib.request; url='http://sglang:30000/health'; print(urllib.request.urlopen(url, timeout=5).status)\""], decision="allow")
prefix_rule(pattern=["C:\\Program Files\\PowerShell\\7\\pwsh.exe", "-Command", "docker inspect sglang-server --format \"health={{.State.Health.Status}}\""], decision="allow")
prefix_rule(pattern=["C:\\Program Files\\PowerShell\\7\\pwsh.exe", "-Command", "git push origin HEAD:master"], decision="allow")
prefix_rule(pattern=["C:\\Program Files\\PowerShell\\7\\pwsh.exe", "-Command", "git push origin --delete main"], decision="allow")
prefix_rule(pattern=["C:\\Program Files\\PowerShell\\7\\pwsh.exe", "-Command", "npm run build"], decision="allow")
prefix_rule(pattern=["C:\\Program Files\\PowerShell\\7\\pwsh.exe", "-Command", "git config --global --add safe.directory \"C:/.vscode/detection_pose\""], decision="allow")
prefix_rule(pattern=["C:\\Program Files\\PowerShell\\7\\pwsh.exe", "-Command", "cd \"C:\\.vscode\\detection_pose\"; git push origin master"], decision="allow")
prefix_rule(pattern=["C:\\Program Files\\PowerShell\\7\\pwsh.exe", "-Command", "npm run dev"], decision="allow")
prefix_rule(pattern=["C:\\Program Files\\PowerShell\\7\\pwsh.exe", "-Command", "net localgroup docker-users codexsandboxoffline /add"], decision="allow")
prefix_rule(pattern=["C:\\Program Files\\PowerShell\\7\\pwsh.exe", "-Command", "git add -- AGENTS.md web_client/index.html web_client/avatar_lipsync.js docs/plans/2026-01-12-cs-agent-avatar-ws-viseme-canvas2d-design.md docs/plans/2026-01-12-piper-rhubarb-viseme-chunks-design.md"], decision="allow")
prefix_rule(pattern=["C:\\Program Files\\PowerShell\\7\\pwsh.exe", "-Command", "git add -u -- AGENTS.md web_client docs/plans"], decision="allow")
prefix_rule(pattern=["C:\\Program Files\\PowerShell\\7\\pwsh.exe", "-Command", "git commit -m \"chore: remove 2d avatar ui\""], decision="allow")
prefix_rule(pattern=["C:\\Program Files\\PowerShell\\7\\pwsh.exe", "-Command", "npm install -g pyright"], decision="allow")
prefix_rule(pattern=["C:\\Program Files\\PowerShell\\7\\pwsh.exe", "-Command", "Remove-Item -Recurse -Force \"C:\\Users\\IOT\\.codex\\mcp\\pyright-autostart\""], decision="allow")
prefix_rule(pattern=["C:\\Program Files\\PowerShell\\7\\pwsh.exe", "-Command", "npm install -g cclsp"], decision="allow")
prefix_rule(pattern=["C:\\Program Files\\PowerShell\\7\\pwsh.exe", "-Command", "git checkout e1abd7189b71bc5fb2ae8944d2c254cfbdaabc38"], decision="allow")
prefix_rule(pattern=["C:\\Program Files\\PowerShell\\7\\pwsh.exe", "-Command", "git restore --worktree orchestrator/server.py"], decision="allow")
prefix_rule(pattern=["C:\\Program Files\\PowerShell\\7\\pwsh.exe", "-Command", "git push --force origin HEAD:master"], decision="allow")
prefix_rule(pattern=["C:\\Program Files\\PowerShell\\7\\pwsh.exe", "-Command", "git fetch origin"], decision="allow")
prefix_rule(pattern=["C:\\Program Files\\PowerShell\\7\\pwsh.exe", "-Command", "git checkout master"], decision="allow")
prefix_rule(pattern=["C:\\Program Files\\PowerShell\\7\\pwsh.exe", "-Command", "git reset --hard origin/master"], decision="allow")
prefix_rule(pattern=["C:\\Program Files\\PowerShell\\7\\pwsh.exe", "-Command", "powershell -NoProfile -Command \"Get-ChildItem -Path 'C:\\Users\\IOT\\.codex\\skills' | Select-Object -ExpandProperty Name\""], decision="allow")
prefix_rule(pattern=["C:\\Program Files\\PowerShell\\7\\pwsh.exe", "-Command", "powershell -NoProfile -Command \"Test-Path -Path 'C:\\Users\\IOT\\docs\\current_task.md'\""], decision="allow")
prefix_rule(pattern=["C:\\Program Files\\PowerShell\\7\\pwsh.exe", "-Command", "powershell -NoProfile -Command \"git --version\""], decision="allow")
prefix_rule(pattern=["C:\\Program Files\\PowerShell\\7\\pwsh.exe", "-Command", "powershell -NoProfile -Command \"New-Item -ItemType Directory -Force -Path 'C:\\Users\\IOT\\tmp' | Out-Null; if (Test-Path 'C:\\Users\\IOT\\tmp\\anthropics-skills') { Remove-Item -Recurse -Force 'C:\\Users\\IOT\\tmp\\anthropics-skills' }; git clone --depth 1 https://github.com/anthropics/skills.git 'C:\\Users\\IOT\\tmp\\anthropics-skills'\""], decision="allow")
prefix_rule(pattern=["C:\\Program Files\\PowerShell\\7\\pwsh.exe", "-Command", "powershell -NoProfile -Command \"Get-ChildItem -Path 'C:\\Users\\IOT\\tmp\\anthropics-skills' | Select-Object -ExpandProperty Name\""], decision="allow")
prefix_rule(pattern=["C:\\Program Files\\PowerShell\\7\\pwsh.exe", "-Command", "powershell -NoProfile -Command \"Get-ChildItem -Path 'C:\\Users\\IOT\\tmp\\anthropics-skills\\skills' -Directory | Select-Object -ExpandProperty Name | Sort-Object\""], decision="allow")
prefix_rule(pattern=["C:\\Program Files\\PowerShell\\7\\pwsh.exe", "-Command", "powershell -NoProfile -Command \"$base='C:\\Users\\IOT\\tmp\\anthropics-skills\\skills'; Get-ChildItem $base -Directory | Sort-Object Name | ForEach-Object { $skill=$_.Name; $path=Join-Path $_.FullName 'SKILL.md'; if (Test-Path $path) { $lines=Get-Content $path -TotalCount 40; $header=$lines -join \"`n\"; $name=($lines | Select-String -Pattern '^name:' -SimpleMatch | Select-Object -First 1).Line; $desc=($lines | Select-String -Pattern '^description:' -SimpleMatch | Select-Object -First 1).Line; [PSCustomObject]@{skill=$skill; name=$name; description=$desc; hasSkillMd=$true} } else { [PSCustomObject]@{skill=$skill; name=''; description=''; hasSkillMd=$false} } } | Format-Table -AutoSize\""], decision="allow")
prefix_rule(pattern=["C:\\Program Files\\PowerShell\\7\\pwsh.exe", "-Command", "powershell -NoProfile -Command '$base=\"C:\\Users\\IOT\\tmp\\anthropics-skills\\skills\"; Get-ChildItem $base -Directory | Sort-Object Name | ForEach-Object { $skill=$_.Name; $path=Join-Path $_.FullName \"SKILL.md\"; if (Test-Path $path) { $lines=Get-Content $path -TotalCount 60; $nameLine=($lines | Select-String -Pattern \"^name:\" | Select-Object -First 1).Line; $descLine=($lines | Select-String -Pattern \"^description:\" | Select-Object -First 1).Line; [PSCustomObject]@{skill=$skill; name=$nameLine; description=$descLine; hasSkillMd=$true} } else { [PSCustomObject]@{skill=$skill; name=$null; description=$null; hasSkillMd=$false} } } | Format-Table -AutoSize'"], decision="allow")
prefix_rule(pattern=["C:\\Program Files\\PowerShell\\7\\pwsh.exe", "-Command", "powershell -NoProfile -Command \"Get-Content -Path 'C:\\Users\\IOT\\tmp\\anthropics-skills\\skills\\internal-comms\\SKILL.md' -TotalCount 120\""], decision="allow")
prefix_rule(pattern=["C:\\Program Files\\PowerShell\\7\\pwsh.exe", "-Command", "powershell -NoProfile -Command \"Get-Content -Path 'C:\\Users\\IOT\\tmp\\anthropics-skills\\skills\\brand-guidelines\\SKILL.md' -TotalCount 120\""], decision="allow")
prefix_rule(pattern=["C:\\Program Files\\PowerShell\\7\\pwsh.exe", "-Command", "powershell -NoProfile -Command \"Get-Content -Path 'C:\\Users\\IOT\\tmp\\anthropics-skills\\skills\\frontend-design\\SKILL.md' -TotalCount 120\""], decision="allow")
prefix_rule(pattern=["C:\\Program Files\\PowerShell\\7\\pwsh.exe", "-Command", "powershell -NoProfile -Command \"Get-Content -Path 'C:\\Users\\IOT\\tmp\\anthropics-skills\\skills\\webapp-testing\\SKILL.md' -TotalCount 120\""], decision="allow")
prefix_rule(pattern=["C:\\Program Files\\PowerShell\\7\\pwsh.exe", "-Command", "powershell -NoProfile -Command \"$existing=Get-ChildItem 'C:\\Users\\IOT\\.codex\\skills' -Directory | Select-Object -ExpandProperty Name; $new=Get-ChildItem 'C:\\Users\\IOT\\tmp\\anthropics-skills\\skills' -Directory | Select-Object -ExpandProperty Name; $toInstall=$new | Where-Object { $_ -notin $existing -and $_ -ne 'skill-creator' }; 'ToInstall:'; $toInstall | Sort-Object\""], decision="allow")
prefix_rule(pattern=["C:\\Program Files\\PowerShell\\7\\pwsh.exe", "-Command", "powershell -NoProfile -Command '$existing=Get-ChildItem \"C:\\Users\\IOT\\.codex\\skills\" -Directory | Select-Object -ExpandProperty Name; $new=Get-ChildItem \"C:\\Users\\IOT\\tmp\\anthropics-skills\\skills\" -Directory | Select-Object -ExpandProperty Name; $toInstall=$new | Where-Object { $_ -notin $existing -and $_ -ne \"skill-creator\" }; \"ToInstall:\"; $toInstall | Sort-Object'"], decision="allow")
prefix_rule(pattern=["C:\\Program Files\\PowerShell\\7\\pwsh.exe", "-Command", "powershell -NoProfile -Command \"Get-ChildItem -Path 'C:\\Users\\IOT\\.codex\\skills\\.system\\skill-installer\\scripts' | Select-Object -ExpandProperty Name\""], decision="allow")
prefix_rule(pattern=["C:\\Program Files\\PowerShell\\7\\pwsh.exe", "-Command", "powershell -NoProfile -Command \"python --version\""], decision="allow")
prefix_rule(pattern=["C:\\Program Files\\PowerShell\\7\\pwsh.exe", "-Command", "powershell -NoProfile -Command \"python 'C:\\Users\\IOT\\.codex\\skills\\.system\\skill-installer\\scripts\\install-skill-from-github.py' --repo anthropics/skills --path skills/algorithmic-art --path skills/brand-guidelines --path skills/canvas-design --path skills/doc-coauthoring --path skills/docx --path skills/frontend-design --path skills/internal-comms --path skills/mcp-builder --path skills/pdf --path skills/pptx --path skills/slack-gif-creator --path skills/theme-factory --path skills/webapp-testing --path skills/web-artifacts-builder --path skills/xlsx\""], decision="allow")
prefix_rule(pattern=["C:\\Program Files\\PowerShell\\7\\pwsh.exe", "-Command", "powershell -NoProfile -Command \"Get-ChildItem -Path 'C:\\Users\\IOT\\.codex\\skills' -Directory | Select-Object -ExpandProperty Name | Sort-Object\""], decision="allow")
prefix_rule(pattern=["C:\\Program Files\\PowerShell\\7\\pwsh.exe", "-Command", "powershell -NoProfile -Command \"python 'C:\\Users\\IOT\\.codex\\skills\\.system\\skill-installer\\scripts\\install-skill-from-github.py' --help\""], decision="allow")
prefix_rule(pattern=["C:\\Program Files\\PowerShell\\7\\pwsh.exe", "-Command", "powershell -NoProfile -Command \"python 'C:\\Users\\IOT\\.codex\\skills\\.system\\skill-installer\\scripts\\install-skill-from-github.py' --repo anthropics/skills --path skills/algorithmic-art skills/brand-guidelines skills/canvas-design skills/doc-coauthoring skills/docx skills/frontend-design skills/internal-comms skills/mcp-builder skills/pdf skills/pptx skills/slack-gif-creator skills/theme-factory skills/webapp-testing skills/web-artifacts-builder\""], decision="allow")
prefix_rule(pattern=["C:\\Program Files\\PowerShell\\7\\pwsh.exe", "-Command", "powershell -NoProfile -Command \"$p='C:\\Users\\IOT\\docs\\current_task.md'; $c=Get-Content $p -Raw; $c=$c -replace '\\- \\[ \\] 取得 anthropics/skills 的技能清單與描述','- [x] 取得 anthropics/skills 的技能清單與描述'; $c=$c -replace '\\- \\[ \\] 建立目前已安裝 skills 的基準清單','- [x] 建立目前已安裝 skills 的基準清單'; $c=$c -replace '\\- \\[ \\] 比對並挑出不相似（不重複/不冗餘）技能','- [x] 比對並挑出不相似（不重複/不冗餘）技能'; $c=$c -replace '\\- \\[ \\] 安裝新技能到 `\\.codex/skills`','- [x] 安裝新技能到 `.codex/skills`'; Set-Content -Path $p -Value $c -Encoding utf8\""], decision="allow")
prefix_rule(pattern=["C:\\Program Files\\PowerShell\\7\\pwsh.exe", "-Command", "powershell -NoProfile -Command '$p=\"C:\\Users\\IOT\\docs\\current_task.md\"; $c=Get-Content $p -Raw; $c=$c -replace \"- \\[ \\] 取得 anthropics/skills 的技能清單與描述\",\"- [x] 取得 anthropics/skills 的技能清單與描述\"; $c=$c -replace \"- \\[ \\] 建立目前已安裝 skills 的基準清單\",\"- [x] 建立目前已安裝 skills 的基準清單\"; $c=$c -replace \"- \\[ \\] 比對並挑出不相似（不重複/不冗餘）技能\",\"- [x] 比對並挑出不相似（不重複/不冗餘）技能\"; $c=$c -replace \"- \\[ \\] 安裝新技能到 `.codex/skills`\",\"- [x] 安裝新技能到 `.codex/skills`\"; Set-Content -Path $p -Value $c -Encoding utf8'"], decision="allow")
prefix_rule(pattern=["C:\\Program Files\\PowerShell\\7\\pwsh.exe", "-Command", "powershell -NoProfile -Command '$p=\"C:\\Users\\IOT\\docs\\current_task.md\"; $c=Get-Content $p -Raw; $c=$c -replace \"- \\[ \\] 取得 anthropics/skills 的技能清單與描述\",\"- [x] 取得 anthropics/skills 的技能清單與描述\"; $c=$c -replace \"- \\[ \\] 建立目前已安裝 skills 的基準清單\",\"- [x] 建立目前已安裝 skills 的基準清單\"; $c=$c -replace \"- \\[ \\] 比對並挑出不相似（不重複/不冗餘）技能\",\"- [x] 比對並挑出不相似（不重複/不冗餘）技能\"; $c=$c -replace ''- \\\\[ \\\\] 安裝新技能到 `\\.codex/skills`'',''- [x] 安裝新技能到 `.codex/skills`''; Set-Content -Path $p -Value $c -Encoding utf8'"], decision="allow")
prefix_rule(pattern=["C:\\Program Files\\PowerShell\\7\\pwsh.exe", "-Command", "powershell -NoProfile -Command \"Get-Content -Path 'C:\\Users\\IOT\\docs\\current_task.md' -TotalCount 120\""], decision="allow")
prefix_rule(pattern=["C:\\Program Files\\PowerShell\\7\\pwsh.exe", "-Command", "powershell -NoProfile -Command \"Get-Content -Path 'C:\\Users\\IOT\\.codex\\skills\\algorithmic-art\\SKILL.md' -TotalCount 20\""], decision="allow")
prefix_rule(pattern=["C:\\Program Files\\PowerShell\\7\\pwsh.exe", "-Command", "powershell -NoProfile -Command '$p=\"C:\\Users\\IOT\\docs\\current_task.md\"; $c=Get-Content $p -Raw; $c=$c -replace \"- \\[ \\] 安裝新技能到 \\.codex/skills\",\"- [x] 安裝新技能到 .codex/skills\"; $c=$c -replace \"\\u0007nthropics\",\"anthropics\"; Set-Content -Path $p -Value $c -Encoding utf8'"], decision="allow")
prefix_rule(pattern=["C:\\Program Files\\PowerShell\\7\\pwsh.exe", "-Command", "powershell -NoProfile -Command '$p=\"C:\\Users\\IOT\\docs\\current_task.md\"; $c=Get-Content $p -Raw; $c=$c -replace \"- \\[ \\] 重新分類並標示 ✅WF\",\"- [x] 重新分類並標示 ✅WF\"; Set-Content -Path $p -Value $c -Encoding utf8'"], decision="allow")
prefix_rule(pattern=["C:\\Program Files\\PowerShell\\7\\pwsh.exe", "-Command", "powershell -NoProfile -Command \"Get-Content -Path 'C:\\Users\\IOT\\.codex\\skills\\docx\\SKILL.md' -TotalCount 200\""], decision="allow")
prefix_rule(pattern=["C:\\Program Files\\PowerShell\\7\\pwsh.exe", "-Command", "powershell -NoProfile -Command \"Get-ChildItem -Path 'C:\\Users\\IOT\\.codex\\skills\\docx' | Select-Object -ExpandProperty Name\""], decision="allow")
prefix_rule(pattern=["C:\\Program Files\\PowerShell\\7\\pwsh.exe", "-Command", "powershell -NoProfile -Command \"Get-ChildItem -Path 'C:\\Users\\IOT\\.codex\\skills\\docx\\scripts' -Recurse | Select-Object -ExpandProperty FullName\""], decision="allow")
prefix_rule(pattern=["C:\\Program Files\\PowerShell\\7\\pwsh.exe", "-Command", "powershell -NoProfile -Command \"Get-Content -Path 'C:\\Users\\IOT\\.codex\\skills\\docx\\scripts\\document.py' -TotalCount 200\""], decision="allow")
prefix_rule(pattern=["C:\\Program Files\\PowerShell\\7\\pwsh.exe", "-Command", "powershell -NoProfile -Command \"node --version\""], decision="allow")
prefix_rule(pattern=["C:\\Program Files\\PowerShell\\7\\pwsh.exe", "-Command", "powershell -NoProfile -Command \"npm --version\""], decision="allow")
prefix_rule(pattern=["C:\\Program Files\\PowerShell\\7\\pwsh.exe", "-Command", "powershell -NoProfile -Command \"node -e \\\"require('docx'); console.log('docx-ok')\\\"\""], decision="allow")
prefix_rule(pattern=["C:\\Program Files\\PowerShell\\7\\pwsh.exe", "-Command", "powershell -NoProfile -Command 'node -e \"require(''docx''); console.log(''docx-ok'')\"'"], decision="allow")
prefix_rule(pattern=["C:\\Program Files\\PowerShell\\7\\pwsh.exe", "-Command", "powershell -NoProfile -Command \"New-Item -ItemType Directory -Force -Path 'C:\\Users\\IOT\\tmp\\skills-docx' | Out-Null; Set-Location 'C:\\Users\\IOT\\tmp\\skills-docx'; if (-not (Test-Path package.json)) { npm init -y | Out-Null }; npm install docx@^8 --silent\""], decision="allow")
prefix_rule(pattern=["C:\\Program Files\\PowerShell\\7\\pwsh.exe", "-Command", "powershell -NoProfile -Command \"Get-Content -Path 'C:\\Users\\IOT\\tmp\\skills-docx\\generate.cjs' | Select-Object -Skip 210 -First 30\""], decision="allow")
prefix_rule(pattern=["C:\\Program Files\\PowerShell\\7\\pwsh.exe", "-Command", "powershell -NoProfile -Command \"$p='C:\\Users\\IOT\\tmp\\skills-docx\\generate.cjs'; $c=Get-Content $p -Raw; $c=$c -replace 'children\\.push\\(bullet\\(\\$\\{prefix\\}\\)\\);','children.push(bullet(prefix + s.name));'; Set-Content -Path $p -Value $c -Encoding utf8\""], decision="allow")
prefix_rule(pattern=["C:\\Program Files\\PowerShell\\7\\pwsh.exe", "-Command", "powershell -NoProfile -Command '$p=\"C:\\Users\\IOT\\tmp\\skills-docx\\generate.cjs\"; $c=Get-Content $p -Raw; $c=$c -replace \"children\\.push\\(bullet\\(\\$\\{prefix\\}\\)\\);\",\"children.push(bullet(prefix + s.name));\"; Set-Content -Path $p -Value $c -Encoding utf8'"], decision="allow")
prefix_rule(pattern=["C:\\Program Files\\PowerShell\\7\\pwsh.exe", "-Command", "powershell -NoProfile -Command \"Get-Content -Path 'C:\\Users\\IOT\\tmp\\skills-docx\\generate.cjs' | Select-Object -Skip 216 -First 20\""], decision="allow")
prefix_rule(pattern=["C:\\Program Files\\PowerShell\\7\\pwsh.exe", "-Command", "powershell -NoProfile -Command \"node 'C:\\Users\\IOT\\tmp\\skills-docx\\generate.cjs'\""], decision="allow")
prefix_rule(pattern=["C:\\Program Files\\PowerShell\\7\\pwsh.exe", "-Command", "powershell -NoProfile -Command \"Get-Content -Path 'C:\\Users\\IOT\\tmp\\skills-docx\\generate.cjs' | Select-Object -Skip 262 -First 20\""], decision="allow")
prefix_rule(pattern=["C:\\Program Files\\PowerShell\\7\\pwsh.exe", "-Command", "powershell -NoProfile -Command '$p=\"C:\\Users\\IOT\\tmp\\skills-docx\\generate.cjs\"; $c=Get-Content $p -Raw; $c=$c -replace \"console\\.log\\(Wrote:\\s*\\(\\s*bytes\\)\\)\\;\",\"console.log(''Wrote: '' + outPath + '' ('' + buf.length + '' bytes)'');\"; Set-Content -Path $p -Value $c -Encoding utf8'"], decision="allow")
prefix_rule(pattern=["C:\\Program Files\\PowerShell\\7\\pwsh.exe", "-Command", "powershell -NoProfile -Command \"Get-Content -Path 'C:\\Users\\IOT\\tmp\\skills-docx\\generate.cjs' | Select-Object -Skip 266 -First 12\""], decision="allow")
prefix_rule(pattern=["C:\\Program Files\\PowerShell\\7\\pwsh.exe", "-Command", "powershell -NoProfile -Command \"Get-Item -Path 'C:\\Users\\IOT\\docs\\skills_catalog.docx' | Select-Object FullName,Length,LastWriteTime\""], decision="allow")
prefix_rule(pattern=["C:\\Program Files\\PowerShell\\7\\pwsh.exe", "-Command", "powershell -NoProfile -Command '$p=\"C:\\Users\\IOT\\docs\\current_task.md\"; $c=Get-Content $p -Raw; $c=$c -replace \"- \\[ \\] 盤點本機 skills 與描述\",\"- [x] 盤點本機 skills 與描述\"; $c=$c -replace \"- \\[ \\] 產生 `docs/skills_catalog\\.docx`\",\"- [x] 產生 `docs/skills_catalog.docx`\"; $c=$c -replace \"- \\[ \\] 驗證輸出檔案存在\",\"- [x] 驗證輸出檔案存在\"; Set-Content -Path $p -Value $c -Encoding utf8'"], decision="allow")
prefix_rule(pattern=["C:\\Program Files\\PowerShell\\7\\pwsh.exe", "-Command", "powershell -NoProfile -Command \"Get-Content -Path 'C:\\Users\\IOT\\docs\\current_task.md' -TotalCount 80\""], decision="allow")
prefix_rule(pattern=["C:\\Program Files\\PowerShell\\7\\pwsh.exe", "-Command", "powershell -NoProfile -Command \"Test-Path -Path 'C:\\Users\\IOT\\doc'\""], decision="allow")
prefix_rule(pattern=["C:\\Program Files\\PowerShell\\7\\pwsh.exe", "-Command", "powershell -NoProfile -Command \"New-Item -ItemType Directory -Force -Path 'C:\\Users\\IOT\\doc' | Out-Null; Copy-Item -Force -Path 'C:\\Users\\IOT\\docs\\skills_catalog.docx' -Destination 'C:\\Users\\IOT\\doc\\skills_catalog.docx'\""], decision="allow")
prefix_rule(pattern=["C:\\Program Files\\PowerShell\\7\\pwsh.exe", "-Command", "powershell -NoProfile -Command \"Get-Item -Path 'C:\\Users\\IOT\\doc\\skills_catalog.docx' | Select-Object FullName,Length,LastWriteTime\""], decision="allow")
prefix_rule(pattern=["C:\\Program Files\\PowerShell\\7\\pwsh.exe", "-Command", "powershell -NoProfile -Command \"Set-Location 'C:\\.vscode\\RE-detrv4-example'; uv pip install --python .\\.venv\\Scripts\\python.exe -r requirements.txt\""], decision="allow")
prefix_rule(pattern=["C:\\Program Files\\PowerShell\\7\\pwsh.exe", "-Command", "powershell -NoProfile -Command \"Set-Location 'C:\\.vscode\\RE-detrv4-example'; uv pip install --python .\\.venv\\Scripts\\python.exe --index-url https://download.pytorch.org/whl/cpu --reinstall torch torchvision torchaudio\""], decision="allow")
prefix_rule(pattern=["C:\\Program Files\\PowerShell\\7\\pwsh.exe", "-Command", "powershell -NoProfile -Command \"Test-NetConnection 118.163.192.216 -Port 554 | Format-List\""], decision="allow")
prefix_rule(pattern=["C:\\Program Files\\PowerShell\\7\\pwsh.exe", "-Command", "powershell -NoProfile -Command \"$env:OPENCV_FFMPEG_CAPTURE_OPTIONS='rtsp_transport;tcp|stimeout;5000000'; Set-Location 'C:\\.vscode\\RE-detrv4-example'; .\\.venv\\Scripts\\python.exe scripts\\tools\\capture_rtsp.py --source 'rtsp://admin:a-123456@118.163.192.216:554/cam/realmonitor?channel=1&subtype=0' --output outputs\\rtsp_test --interval 0.1 --max 1\""], decision="allow")
prefix_rule(pattern=["C:\\Program Files\\PowerShell\\7\\pwsh.exe", "-Command", "Set-Location 'C:\\.vscode\\RE-detrv4-example'; [Environment]::SetEnvironmentVariable('OPENCV_FFMPEG_CAPTURE_OPTIONS','rtsp_transport;tcp|stimeout;5000000','Process'); .\\.venv\\Scripts\\python.exe scripts\\tools\\capture_rtsp.py --source \"rtsp://admin:a-123456@118.163.192.216:554/cam/realmonitor?channel=1&subtype=0\" --output outputs\\rtsp_test --interval 0.1 --max 1"], decision="allow")
prefix_rule(pattern=["C:\\Program Files\\PowerShell\\7\\pwsh.exe", "-Command", "Set-Location 'C:\\.vscode\\RE-detrv4-example'; .\\.venv\\Scripts\\python.exe scripts\\inference\\rtsp_flow_counter.py --engine weights\\rtdetrv4_s.engine --source \"rtsp://admin:a-123456@118.163.192.216:554/cam/realmonitor?channel=1&subtype=0\" --show --rtsp-transport tcp --plugin weights\\grid_sample_plugin.dll"], decision="allow")
prefix_rule(pattern=["C:\\Program Files\\PowerShell\\7\\pwsh.exe", "-Command", "Set-Location 'C:\\.vscode\\RE-detrv4-example'; .\\.venv\\Scripts\\python.exe scripts\\inference\\rtsp_flow_counter.py --engine weights\\rtdetrv4_s.engine --source \"rtsp://admin:a-123456@118.163.192.216:554/cam/realmonitor?channel=1&subtype=0\" --show --plugin weights\\grid_sample_plugin.dll --rtsp-transport tcp --ffmpeg-stimeout-us 5000000"], decision="allow")
prefix_rule(pattern=["C:\\Program Files\\PowerShell\\7\\pwsh.exe", "-Command", "powershell -NoProfile -Command \"[Environment]::SetEnvironmentVariable('OPENCV_FFMPEG_CAPTURE_OPTIONS','rtsp_transport;tcp|stimeout;5000000','Process'); Set-Location 'C:\\.vscode\\RE-detrv4-example'; .\\.venv\\Scripts\\python.exe -c \\\"import cv2; url=r'rtsp://admin:a-123456@118.163.192.216:554/cam/realmonitor?channel=1&subtype=0'; cap=cv2.VideoCapture(url, cv2.CAP_FFMPEG); print('opened', cap.isOpened()); cap.set(cv2.CAP_PROP_BUFFERSIZE,1); ret, frame=cap.read(); print('ret', ret); print('shape', None if frame is None else frame.shape); cap.release()\\\"\""], decision="allow")
prefix_rule(pattern=["C:\\Program Files\\PowerShell\\7\\pwsh.exe", "-Command", "Set-Location 'C:\\.vscode\\RE-detrv4-example'; [Environment]::SetEnvironmentVariable('OPENCV_FFMPEG_CAPTURE_OPTIONS','rtsp_transport;tcp|stimeout;5000000','Process'); .\\.venv\\Scripts\\python.exe -c 'import cv2; url=r\"rtsp://admin:a-123456@118.163.192.216:554/cam/realmonitor?channel=1&subtype=0\"; cap=cv2.VideoCapture(url, cv2.CAP_FFMPEG); print(\"opened\", cap.isOpened()); cap.set(cv2.CAP_PROP_BUFFERSIZE,1); ret, frame=cap.read(); print(\"ret\", ret); print(\"shape\", None if frame is None else frame.shape); cap.release()'"], decision="allow")
prefix_rule(pattern=["C:\\Program Files\\PowerShell\\7\\pwsh.exe", "-Command", "Set-Location 'C:\\.vscode\\RE-detrv4-example'; [Environment]::SetEnvironmentVariable('OPENCV_FFMPEG_CAPTURE_OPTIONS','rtsp_transport;tcp|stimeout;5000000','Process'); .\\.venv\\Scripts\\python.exe scripts\\inference\\rtsp_flow_counter.py --engine weights\\rtdetrv4_s.engine --source \"rtsp://admin:a-123456@118.163.192.216:554/cam/realmonitor?channel=1&subtype=0\" --show --plugin weights\\grid_sample_plugin.dll"], decision="allow")
prefix_rule(pattern=["C:\\Program Files\\PowerShell\\7\\pwsh.exe", "-Command", "git push -u origin person_ids"], decision="allow")
prefix_rule(pattern=["C:\\Program Files\\PowerShell\\7\\pwsh.exe", "-Command", "gh auth status"], decision="allow")
prefix_rule(pattern=["C:\\Program Files\\PowerShell\\7\\pwsh.exe", "-Command", "gh pr list --repo RT-DETRs/RT-DETRv4 --head person_ids --state open --json number,title,url"], decision="allow")
prefix_rule(pattern=["C:\\Program Files\\PowerShell\\7\\pwsh.exe", "-Command", "gh pr list --repo monkey1sai/RT-DETRv4 --head person_ids --state open --json number,title,url"], decision="allow")
prefix_rule(pattern=["C:\\Program Files\\PowerShell\\7\\pwsh.exe", "-Command", "gh pr status"], decision="allow")
prefix_rule(pattern=["C:\\Program Files\\PowerShell\\7\\pwsh.exe", "-Command", "cd C:\\.vscode\\RE-detrv4-example && gh auth status"], decision="allow")
prefix_rule(pattern=["C:\\Program Files\\PowerShell\\7\\pwsh.exe", "-Command", "cd C:\\.vscode\\RE-detrv4-example && gh pr status"], decision="allow")
prefix_rule(pattern=["C:\\Program Files\\PowerShell\\7\\pwsh.exe", "-Command", "cd C:\\.vscode\\RE-detrv4-example && gh pr list -R RT-DETRs/RT-DETRv4 --search \"head:person_ids\" --json number,title,headRefName,headRepositoryOwner,author,state --limit 20"], decision="allow")
prefix_rule(pattern=["C:\\Program Files\\PowerShell\\7\\pwsh.exe", "-Command", "cd C:\\.vscode\\RE-detrv4-example && gh search prs --author @me \"person_ids\" --limit 20 --json number,title,url,repository,state"], decision="allow")
prefix_rule(pattern=["C:\\Program Files\\PowerShell\\7\\pwsh.exe", "-Command", "cd C:\\.vscode\\RE-detrv4-example && gh search prs \"person_ids author:monkey1sai\" --limit 20 --json number,title,url,repository,state"], decision="allow")
prefix_rule(pattern=["C:\\Program Files\\PowerShell\\7\\pwsh.exe", "-Command", "cd C:\\.vscode\\RE-detrv4-example && gh search prs \"repo:RT-DETRs/RT-DETRv4 author:monkey1sai\" --limit 20 --json number,title,url,state"], decision="allow")
prefix_rule(pattern=["C:\\Program Files\\PowerShell\\7\\pwsh.exe", "-Command", "cd C:\\.vscode\\RE-detrv4-example && gh repo view RT-DETRs/RT-DETRv4 --json url,visibility,defaultBranchRef --jq \".url + \\\" (\\\" + .visibility + \\\" )\\\"\""], decision="allow")
prefix_rule(pattern=["C:\\Program Files\\PowerShell\\7\\pwsh.exe", "-Command", "cd C:\\.vscode\\RE-detrv4-example && gh repo view RT-DETRs/RT-DETRv4 --json url,visibility,defaultBranchRef"], decision="allow")
prefix_rule(pattern=["C:\\Program Files\\PowerShell\\7\\pwsh.exe", "-Command", "cd C:\\.vscode\\RE-detrv4-example && gh search prs repo:RT-DETRs/RT-DETRv4 author:monkey1sai --limit 5 --json number,title,url,state"], decision="allow")
prefix_rule(pattern=["C:\\Program Files\\PowerShell\\7\\pwsh.exe", "-Command", ".\\.venv\\Scripts\\python.exe scripts\\fetch_comments.py"], decision="allow")
prefix_rule(pattern=["C:\\Program Files\\PowerShell\\7\\pwsh.exe", "-Command", "git push origin HEAD:person_ids"], decision="allow")
prefix_rule(pattern=["C:\\Program Files\\PowerShell\\7\\pwsh.exe", "-Command", "gh pr list --head master --state open --json number,title,url,author,createdAt,updatedAt"], decision="allow")
prefix_rule(pattern=["C:\\Program Files\\PowerShell\\7\\pwsh.exe", "-Command", "git push origin master"], decision="allow")
prefix_rule(pattern=["C:\\Program Files\\PowerShell\\7\\pwsh.exe", "-Command", "node D:\\skillsAsset\\superpowers\\.codex\\superpowers-codex find-skills | Select-Object -First 80"], decision="allow")
prefix_rule(pattern=["C:\\Program Files\\PowerShell\\7\\pwsh.exe", "-Command", "cd D:\\.pygame && powershell -NoProfile -Command \"$logOut='EvoLoot/logs/streamlit_sglang_smoke_8503.out.log'; $logErr='EvoLoot/logs/streamlit_sglang_smoke_8503.err.log'; New-Item -ItemType Directory -Force -Path (Split-Path $logOut) | Out-Null; $p = Start-Process -FilePath .\\.venv\\Scripts\\python.exe -ArgumentList @('-m','streamlit','run','EvoLoot/app.py','--server.headless','true','--server.port','8503','--server.address','127.0.0.1') -RedirectStandardOutput $logOut -RedirectStandardError $logErr -PassThru; Write-Host \"streamlit_pid=$($p.Id)\"; $ok=$false; for($i=0;$i -lt 30;$i++){ Start-Sleep -Seconds 1; try{ $r = Invoke-WebRequest -UseBasicParsing -TimeoutSec 3 http://127.0.0.1:8503/_stcore/health; if($r.StatusCode -eq 200){ $ok=$true; break } } catch { } }; if(-not $ok){ Write-Host 'healthcheck_failed'; Stop-Process -Id $p.Id -Force; exit 1 }; Write-Host 'healthcheck_ok'; Stop-Process -Id $p.Id -Force; Write-Host 'stopped'\""], decision="allow")
prefix_rule(pattern=["C:\\Program Files\\PowerShell\\7\\pwsh.exe", "-Command", "cd D:\\.pygame && powershell -NoProfile -Command '$logOut=\"EvoLoot/logs/streamlit_sglang_smoke_8503.out.log\"; $logErr=\"EvoLoot/logs/streamlit_sglang_smoke_8503.err.log\"; New-Item -ItemType Directory -Force -Path (Split-Path $logOut) | Out-Null; $p = Start-Process -FilePath .\\.venv\\Scripts\\python.exe -ArgumentList @(\"-m\",\"streamlit\",\"run\",\"EvoLoot/app.py\",\"--server.headless\",\"true\",\"--server.port\",\"8503\",\"--server.address\",\"127.0.0.1\") -RedirectStandardOutput $logOut -RedirectStandardError $logErr -PassThru; Write-Host (\"streamlit_pid=\" + $p.Id); $ok=$false; for($i=0;$i -lt 30;$i++){ Start-Sleep -Seconds 1; try{ $r = Invoke-WebRequest -UseBasicParsing -TimeoutSec 3 http://127.0.0.1:8503/_stcore/health; if($r.StatusCode -eq 200){ $ok=$true; break } } catch { } }; if(-not $ok){ Write-Host \"healthcheck_failed\"; Stop-Process -Id $p.Id -Force; exit 1 }; Write-Host \"healthcheck_ok\"; Stop-Process -Id $p.Id -Force; Write-Host \"stopped\"'"], decision="allow")
prefix_rule(pattern=["C:\\Program Files\\PowerShell\\7\\pwsh.exe", "-Command", "cd C:\\Users\\IOT; Get-ChildItem -Directory .codex\\skills | Select-Object -ExpandProperty Name | Sort-Object"], decision="allow")
prefix_rule(pattern=["C:\\Program Files\\PowerShell\\7\\pwsh.exe", "-Command", "cd C:\\Users\\IOT; Get-Content .codex\\skills\\using-superpowers\\SKILL.md -Raw"], decision="allow")
prefix_rule(pattern=["C:\\Program Files\\PowerShell\\7\\pwsh.exe", "-Command", "cd C:\\Users\\IOT; Get-Content .codex\\skills\\writing-skills\\SKILL.md -Raw"], decision="allow")
prefix_rule(pattern=["C:\\Program Files\\PowerShell\\7\\pwsh.exe", "-Command", "cd C:\\Users\\IOT; Get-Content .codex\\skills\\test-driven-development\\SKILL.md -Raw"], decision="allow")
prefix_rule(pattern=["C:\\Program Files\\PowerShell\\7\\pwsh.exe", "-Command", "cd C:\\Users\\IOT; if (Test-Path docs\\current_task.md) { 'EXISTS' } else { 'MISSING' }"], decision="allow")
prefix_rule(pattern=["C:\\Program Files\\PowerShell\\7\\pwsh.exe", "-Command", "cd C:\\Users\\IOT; if (Test-Path docs) { 'DOCS_EXISTS' } else { 'DOCS_MISSING' }"], decision="allow")
prefix_rule(pattern=["C:\\Program Files\\PowerShell\\7\\pwsh.exe", "-Command", "cd C:\\Users\\IOT; Get-ChildItem -Directory .codex\\skills -Filter 'codex-plugin-dev-*' | Select-Object -ExpandProperty Name | Sort-Object"], decision="allow")
prefix_rule(pattern=["C:\\Program Files\\PowerShell\\7\\pwsh.exe", "-Command", "cd C:\\Users\\IOT; $skillsRoot = '.codex\\skills'; $disabledRoot = '.codex\\skills_disabled'; New-Item -ItemType Directory -Force $disabledRoot | Out-Null; $targets = Get-ChildItem -Directory $skillsRoot -Filter 'codex-plugin-dev-*'; foreach ($t in $targets) { $dest = Join-Path $disabledRoot $t.Name; if (Test-Path $dest) { $stamp = Get-Date -Format 'yyyyMMdd-HHmmss'; $dest = Join-Path $disabledRoot ($t.Name + '__' + $stamp) }; Move-Item -LiteralPath $t.FullName -Destination $dest }; $targets.Count"], decision="allow")
prefix_rule(pattern=["C:\\Program Files\\PowerShell\\7\\pwsh.exe", "-Command", "cd C:\\Users\\IOT; Get-ChildItem -Directory .codex\\skills_disabled -Filter 'codex-plugin-dev-*' | Select-Object -ExpandProperty Name | Sort-Object"], decision="allow")
prefix_rule(pattern=["C:\\Program Files\\PowerShell\\7\\pwsh.exe", "-Command", "cd C:\\Users\\IOT; if (Test-Path .codex\\skills_disabled) { Get-ChildItem -Directory .codex\\skills_disabled | Select-Object -ExpandProperty Name | Sort-Object }"], decision="allow")
prefix_rule(pattern=["C:\\Program Files\\PowerShell\\7\\pwsh.exe", "-Command", "cd C:\\Users\\IOT; $ErrorActionPreference='Stop'; function Get-SkillMeta($root,$status){ Get-ChildItem -Path $root -Recurse -File -Filter 'SKILL.md' | ForEach-Object { $raw = Get-Content -LiteralPath $_.FullName -Raw; $m = [regex]::Match($raw, '^(?<fm>---\\R.*?\\R---)\\R', [System.Text.RegularExpressions.RegexOptions]::Singleline); if (-not $m.Success) { return } $fm = $m.Groups['fm'].Value; $name = ([regex]::Match($fm, '(?m)^name:\\s*(.+)\\s*$')).Groups[1].Value.Trim(); $desc = ([regex]::Match($fm, '(?m)^description:\\s*(.+)\\s*$')).Groups[1].Value.Trim(); if ($name) { [pscustomobject]@{ status=$status; name=$name; description=$desc; path=$_.FullName } } } }; $enabled = Get-SkillMeta '.codex\\skills' 'enabled'; $disabled = @(); if (Test-Path '.codex\\skills_disabled') { $disabled = Get-SkillMeta '.codex\\skills_disabled' 'disabled' }; @($enabled + $disabled) | Sort-Object status,name | ConvertTo-Json -Depth 4"], decision="allow")
prefix_rule(pattern=["C:\\Program Files\\PowerShell\\7\\pwsh.exe", "-Command", "cd C:\\Users\\IOT; (Get-ChildItem -Path .codex\\skills -Recurse -File -Filter 'SKILL.md').Count"], decision="allow")
prefix_rule(pattern=["C:\\Program Files\\PowerShell\\7\\pwsh.exe", "-Command", "cd C:\\Users\\IOT; if (Test-Path .codex\\skills_disabled) { (Get-ChildItem -Path .codex\\skills_disabled -Recurse -File -Filter 'SKILL.md').Count } else { 0 }"], decision="allow")
prefix_rule(pattern=["C:\\Program Files\\PowerShell\\7\\pwsh.exe", "-Command", "cd C:\\Users\\IOT; $ErrorActionPreference='Stop'; function Get-SkillMeta($root,$status){ Get-ChildItem -Path $root -Recurse -File -Filter 'SKILL.md' | ForEach-Object { $raw = Get-Content -LiteralPath $_.FullName -Raw; $m = [regex]::Match($raw, '^(?<fm>---\\s*\\r?\\n.*?\\r?\\n---)\\s*\\r?\\n', [System.Text.RegularExpressions.RegexOptions]::Singleline); if (-not $m.Success) { return } $fm = $m.Groups['fm'].Value; $nameMatch = [regex]::Match($fm, '(?m)^name:\\s*(.+)\\s*$'); $descMatch = [regex]::Match($fm, '(?m)^description:\\s*(.+)\\s*$'); $name = $nameMatch.Groups[1].Value.Trim(); $desc = $descMatch.Groups[1].Value.Trim(); if ($name) { [pscustomobject]@{ status=$status; name=$name; description=$desc; path=$_.FullName } } } }; $enabled = Get-SkillMeta '.codex\\skills' 'enabled'; $disabled = @(); if (Test-Path '.codex\\skills_disabled') { $disabled = Get-SkillMeta '.codex\\skills_disabled' 'disabled' }; @($enabled + $disabled) | Sort-Object status,name | ConvertTo-Json -Depth 4"], decision="allow")
prefix_rule(pattern=["C:\\Program Files\\PowerShell\\7\\pwsh.exe", "-Command", "cd C:\\Users\\IOT; $ErrorActionPreference='Stop'; function Get-SkillMeta($root,$status){ Get-ChildItem -Path $root -Recurse -File -Filter 'SKILL.md' | ForEach-Object { $raw = Get-Content -LiteralPath $_.FullName -Raw; $m = [regex]::Match($raw, '^(?<fm>---\\s*\\r?\\n.*?\\r?\\n---)\\s*\\r?\\n', [System.Text.RegularExpressions.RegexOptions]::Singleline); if (-not $m.Success) { return } $fm = $m.Groups['fm'].Value; $name = ([regex]::Match($fm, '(?m)^name:\\s*(.+)\\s*$')).Groups[1].Value.Trim(); $desc = ([regex]::Match($fm, '(?m)^description:\\s*(.+)\\s*$')).Groups[1].Value.Trim(); if ($name) { [pscustomobject]@{ status=$status; name=$name; description=$desc; path=$_.FullName } } } }; $items = @(); $items += Get-SkillMeta '.codex\\skills' 'enabled'; if (Test-Path '.codex\\skills_disabled') { $items += Get-SkillMeta '.codex\\skills_disabled' 'disabled' }; $items = $items | Sort-Object status,name; $outPath = 'docs\\skills_catalog.md'; $lines = New-Object System.Collections.Generic.List[string]; $lines.Add('# Codex CLI 技能清單'); $lines.Add(''); $lines.Add(('產生時間：{0}' -f (Get-Date -Format 'yyyy-MM-dd HH:mm:ss'))); $lines.Add(''); $lines.Add('## 說明'); $lines.Add('- 本文件從每個技能的 `SKILL.md` YAML frontmatter 擷取 `name` 與 `description`。'); $lines.Add('- `description` 主要用於判斷「何時要使用這個技能」（觸發情境）。'); $lines.Add(''); foreach ($group in @('enabled','disabled')) { $gItems = $items | Where-Object { $_.status -eq $group }; if (-not $gItems) { continue }; $title = if ($group -eq 'enabled') { '啟用中' } else { '已停用' }; $lines.Add(('## {0}（{1}）' -f $title, $gItems.Count)); $lines.Add(''); foreach ($it in $gItems) { $lines.Add(('### {0}' -f $it.name)); $lines.Add(('- 狀態：`{0}`' -f $it.status)); if ($it.description) { $lines.Add(('- 觸發情境：{0}' -f $it.description)); } else { $lines.Add('- 觸發情境：（`SKILL.md` 未提供 `description`）'); } $lines.Add(('- 路徑：`{0}`' -f $it.path)); $lines.Add(''); } }; New-Item -ItemType Directory -Force (Split-Path $outPath) | Out-Null; Set-Content -LiteralPath $outPath -Value $lines -Encoding UTF8; $items.Count"], decision="allow")
prefix_rule(pattern=["C:\\Program Files\\PowerShell\\7\\pwsh.exe", "-Command", "cd C:\\Users\\IOT; Get-Content docs\\skills_catalog.md -TotalCount 80"], decision="allow")
prefix_rule(pattern=["C:\\Program Files\\PowerShell\\7\\pwsh.exe", "-Command", "cd C:\\Users\\IOT; (Get-Content docs\\skills_catalog.md | Measure-Object -Line).Lines"], decision="allow")
prefix_rule(pattern=["C:\\Program Files\\PowerShell\\7\\pwsh.exe", "-Command", "cd C:\\Users\\IOT; $ErrorActionPreference='Stop'; $skillsRoot = '.codex\\skills'; $disabledRoot = '.codex\\skills_disabled'; $targets = Get-ChildItem -Directory $disabledRoot -Filter 'codex-plugin-dev-*'; foreach ($t in $targets) { $dest = Join-Path $skillsRoot $t.Name; if (Test-Path $dest) { $stamp = Get-Date -Format 'yyyyMMdd-HHmmss'; $dest = Join-Path $skillsRoot ($t.Name + '__' + $stamp) }; Move-Item -LiteralPath $t.FullName -Destination $dest }; $targets.Count"], decision="allow")
prefix_rule(pattern=["C:\\Program Files\\PowerShell\\7\\pwsh.exe", "-Command", "powershell -NoProfile -Command \"Get-Content -Path 'C:\\Users\\IOT\\.codex\\skills\\using-superpowers\\SKILL.md' -TotalCount 200\""], decision="allow")
prefix_rule(pattern=["C:\\Program Files\\PowerShell\\7\\pwsh.exe", "-Command", "powershell -NoProfile -Command \"Get-Content -Raw 'C:/Users/IOT/.codex/skills/using-superpowers/SKILL.md'\""], decision="allow")
prefix_rule(pattern=["C:\\Program Files\\PowerShell\\7\\pwsh.exe", "-Command", "powershell -NoProfile -Command \"if (Test-Path 'C:/Users/IOT/.codex/config.toml') { Get-Content -Raw 'C:/Users/IOT/.codex/config.toml' } else { Write-Output 'MISSING' }\""], decision="allow")
prefix_rule(pattern=["C:\\Program Files\\PowerShell\\7\\pwsh.exe", "-Command", "powershell -NoProfile -Command \"if (Test-Path 'C:/Users/IOT/docs/current_task.md') { 'EXISTS' } else { 'MISSING' }\""], decision="allow")
prefix_rule(pattern=["C:\\Program Files\\PowerShell\\7\\pwsh.exe", "-Command", "powershell -NoProfile -Command \"Get-Content -Raw 'C:/Users/IOT/docs/current_task.md'\""], decision="allow")
prefix_rule(pattern=["C:\\Program Files\\PowerShell\\7\\pwsh.exe", "-Command", "powershell -NoProfile -Command \"codex --help\""], decision="allow")
prefix_rule(pattern=["C:\\Program Files\\PowerShell\\7\\pwsh.exe", "-Command", "powershell -NoProfile -Command \"if (Test-Path 'C:/Users/IOT/.codex/SYSTEM.md') { Get-Content -Raw 'C:/Users/IOT/.codex/SYSTEM.md' } else { 'MISSING' }\""], decision="allow")
prefix_rule(pattern=["C:\\Program Files\\PowerShell\\7\\pwsh.exe", "-Command", "powershell -NoProfile -Command \"Get-Content -Raw 'C:/Users/IOT/.codex/skills/writing-skills/SKILL.md'\""], decision="allow")
prefix_rule(pattern=["C:\\Program Files\\PowerShell\\7\\pwsh.exe", "-Command", "Remove-Item -Recurse -Force skills\\ai-dev-guardrails\\exports\\antigravity\\.agent\\skills\\ai-dev-guardrails\\scripts\\__pycache__; Remove-Item -Recurse -Force skills\\ai-dev-guardrails\\exports\\gemini-cli\\ai-dev-guardrails\\tools\\__pycache__"], decision="allow")
prefix_rule(pattern=["C:\\Program Files\\PowerShell\\7\\pwsh.exe", "-Command", "Remove-Item -Recurse -Force rag_eval\\outputs_onecall_cs_smoke,rag_eval\\outputs_onecall_smoke,rag_eval\\outputs_remote,rag_eval\\outputs_remote2,rag_eval\\outputs_remote3,rag_eval\\outputs_smoke"], decision="allow")
prefix_rule(pattern=["C:\\Program Files\\PowerShell\\7\\pwsh.exe", "-Command", "cd C:\\Users\\IOT && dir"], decision="allow")
prefix_rule(pattern=["C:\\Program Files\\PowerShell\\7\\pwsh.exe", "-Command", "cd C:\\Users\\IOT && dir .codex\\skills"], decision="allow")
prefix_rule(pattern=["C:\\Program Files\\PowerShell\\7\\pwsh.exe", "-Command", "cd C:\\Users\\IOT && dir docs && if (Test-Path docs\\current_task.md) { 'current_task.md exists' } else { 'current_task.md missing' }"], decision="allow")
prefix_rule(pattern=["C:\\Program Files\\PowerShell\\7\\pwsh.exe", "-Command", "cd C:\\Users\\IOT && type docs\\current_task.md"], decision="allow")
prefix_rule(pattern=["C:\\Program Files\\PowerShell\\7\\pwsh.exe", "-Command", "cd C:\\Users\\IOT && type .codex\\skills\\create-plan\\agents\\openai.yaml && echo '---' && type .codex\\skills\\create-plan\\SKILL.md"], decision="allow")
prefix_rule(pattern=["C:\\Program Files\\PowerShell\\7\\pwsh.exe", "-Command", "cd C:\\Users\\IOT && dir .codex\\skills\\create-plan"], decision="allow")
prefix_rule(pattern=["C:\\Program Files\\PowerShell\\7\\pwsh.exe", "-Command", "cd C:\\Users\\IOT && dir .codex\\skills\\ai-dev-guardrails && dir .codex\\skills\\ai-dev-guardrails\\agents"], decision="allow")
prefix_rule(pattern=["C:\\Program Files\\PowerShell\\7\\pwsh.exe", "-Command", "cd C:\\Users\\IOT && dir .codex\\skills\\.system\\skill-creator && dir .codex\\skills\\.system\\skill-creator\\scripts"], decision="allow")
prefix_rule(pattern=["C:\\Program Files\\PowerShell\\7\\pwsh.exe", "-Command", "cd C:\\Users\\IOT && type .codex\\skills\\.system\\skill-creator\\agents\\openai.yaml"], decision="allow")
prefix_rule(pattern=["C:\\Program Files\\PowerShell\\7\\pwsh.exe", "-Command", "cd C:\\Users\\IOT && if (Test-Path .codex\\skills\\skill-evolution-loop) { dir .codex\\skills\\skill-evolution-loop } else { echo 'missing' }"], decision="allow")
prefix_rule(pattern=["C:\\Program Files\\PowerShell\\7\\pwsh.exe", "-Command", "cd C:\\Users\\IOT; Test-Path .codex\\skills\\skill-evolution-loop"], decision="allow")
prefix_rule(pattern=["C:\\Program Files\\PowerShell\\7\\pwsh.exe", "-Command", "cd C:\\Users\\IOT; New-Item -ItemType Directory -Force .codex\\skills\\skill-evolution-loop,.codex\\skills\\skill-evolution-loop\\agents,.codex\\skills\\skill-evolution-loop\\references | Out-Null; 'ok'"], decision="allow")
prefix_rule(pattern=["C:\\Program Files\\PowerShell\\7\\pwsh.exe", "-Command", "cd C:\\Users\\IOT; Test-Path .venv"], decision="allow")
prefix_rule(pattern=["C:\\Program Files\\PowerShell\\7\\pwsh.exe", "-Command", "cd C:\\Users\\IOT; uv --version"], decision="allow")
prefix_rule(pattern=["C:\\Program Files\\PowerShell\\7\\pwsh.exe", "-Command", "cd C:\\Users\\IOT; uv venv .venv"], decision="allow")
prefix_rule(pattern=["C:\\Program Files\\PowerShell\\7\\pwsh.exe", "-Command", "cd C:\\Users\\IOT; .\\.venv\\Scripts\\python.exe .\\.codex\\skills\\.system\\skill-creator\\scripts\\quick_validate.py .\\.codex\\skills\\skill-evolution-loop"], decision="allow")
prefix_rule(pattern=["C:\\Program Files\\PowerShell\\7\\pwsh.exe", "-Command", "cd C:\\Users\\IOT; uv pip install --python .\\.venv\\Scripts\\python.exe pyyaml"], decision="allow")
prefix_rule(pattern=["C:\\Program Files\\PowerShell\\7\\pwsh.exe", "-Command", "ls -Force .codex/skills | Select-Object Name | Sort-Object Name"], decision="allow")
prefix_rule(pattern=["C:\\Program Files\\PowerShell\\7\\pwsh.exe", "-Command", "ls -Force docs | Select-Object Name,Mode,LastWriteTime,Length | Sort-Object Name"], decision="allow")
prefix_rule(pattern=["C:\\Program Files\\PowerShell\\7\\pwsh.exe", "-Command", "$keys = @(); Get-ChildItem .codex/skills -Directory | ForEach-Object { $path = Join-Path $_.FullName 'SKILL.md'; if (Test-Path $path) { $lines = Get-Content $path -TotalCount 40; $start = ($lines | Select-Object -First 1); if ($start -ne '---') { return } $endIndex = ($lines | Select-Object -Skip 1 | ForEach-Object -Begin {$i=1} -Process { if ($_ -eq '---') { $script:end=$i; break } $i++ }); } }"], decision="allow")
prefix_rule(pattern=["C:\\Program Files\\PowerShell\\7\\pwsh.exe", "-Command", "$skillDirs = Get-ChildItem .codex/skills -Directory; $keyToSkills = @{}; foreach ($dir in $skillDirs) { $path = Join-Path $dir.FullName 'SKILL.md'; if (!(Test-Path $path)) { continue } $lines = Get-Content $path -TotalCount 80; if ($lines.Count -lt 3) { continue } if ($lines[0].Trim() -ne '---') { continue } $endIndex = -1; for ($i = 1; $i -lt $lines.Count; $i++) { if ($lines[$i].Trim() -eq '---') { $endIndex = $i; break } } if ($endIndex -lt 0) { continue } for ($i = 1; $i -lt $endIndex; $i++) { $line = $lines[$i]; if ($line -match '^([A-Za-z0-9_-]+)\\s*:') { $key = $Matches[1]; if (-not $keyToSkills.ContainsKey($key)) { $keyToSkills[$key] = New-Object System.Collections.Generic.HashSet[string] } $null = $keyToSkills[$key].Add($dir.Name) } } } $keyToSkills.GetEnumerator() | Sort-Object { $_.Value.Count } -Descending | ForEach-Object { [pscustomobject]@{Key=$_.Key; Skills=$_.Value.Count; Examples=(@($_.Value) | Sort-Object | Select-Object -First 5) -join ', '} } | Format-Table -AutoSize"], decision="allow")
prefix_rule(pattern=["C:\\Program Files\\PowerShell\\7\\pwsh.exe", "-Command", "$rows = @(); Get-ChildItem .codex/skills -Directory | ForEach-Object { $dir = $_.Name; $path = Join-Path $_.FullName 'SKILL.md'; if (!(Test-Path $path)) { return } $nameLine = (Get-Content $path -TotalCount 10 | Where-Object { $_ -match '^name:' } | Select-Object -First 1); if (!$nameLine) { return } $name = ($nameLine -replace '^name:\\s*','').Trim(); $rows += [pscustomobject]@{Dir=$dir; SkillName=$name; Match=($dir -eq $name)} }; $rows | Where-Object { -not $_.Match } | Sort-Object Dir | Format-Table -AutoSize"], decision="allow")
prefix_rule(pattern=["C:\\Program Files\\PowerShell\\7\\pwsh.exe", "-Command", "rg --files-with-matches \"superpowers:\" .codex/skills -g \"SKILL.md\" | % { $_ -replace '.*\\\\skills\\\\([^\\\\]+)\\\\SKILL\\.md','$1' } | Sort-Object -Unique"], decision="allow")
prefix_rule(pattern=["C:\\Program Files\\PowerShell\\7\\pwsh.exe", "-Command", "rg --files-with-matches \"superpowers:\" .codex/skills -g \"SKILL.md\" | % { $_ -replace '.*[\\\\/]skills[\\\\/]([^\\\\/]+)[\\\\/]SKILL\\.md','$1' } | Sort-Object -Unique"], decision="allow")
prefix_rule(pattern=["C:\\Program Files\\PowerShell\\7\\pwsh.exe", "-Command", "rg --files-with-matches \"TodoWrite\" .codex/skills -g \"SKILL.md\" | % { $_ -replace '.*[\\\\/]skills[\\\\/]([^\\\\/]+)[\\\\/]SKILL\\.md','$1' } | Sort-Object -Unique"], decision="allow")
prefix_rule(pattern=["C:\\Program Files\\PowerShell\\7\\pwsh.exe", "-Command", "rg --files-with-matches \"Task tool\" .codex/skills -g \"SKILL.md\" | % { $_ -replace '.*[\\\\/]skills[\\\\/]([^\\\\/]+)[\\\\/]SKILL\\.md','$1' } | Sort-Object -Unique"], decision="allow")
prefix_rule(pattern=["C:\\Program Files\\PowerShell\\7\\pwsh.exe", "-Command", "rg --files-with-matches \"Task\\(\" .codex/skills -g \"SKILL.md\" | % { $_ -replace '.*[\\\\/]skills[\\\\/]([^\\\\/]+)[\\\\/]SKILL\\.md','$1' } | Sort-Object -Unique"], decision="allow")
prefix_rule(pattern=["C:\\Program Files\\PowerShell\\7\\pwsh.exe", "-Command", "rg --files-with-matches \"\\bpip install\\b|\\bpoetry install\\b|winget install Python|brew install python|sudo apt install python\" .codex/skills -g \"SKILL.md\" | % { $_ -replace '.*[\\\\/]skills[\\\\/]([^\\\\/]+)[\\\\/]SKILL\\.md','$1' } | Sort-Object -Unique"], decision="allow")
prefix_rule(pattern=["C:\\Program Files\\PowerShell\\7\\pwsh.exe", "-Command", "rg --files-with-matches \"any conversation|Route any user request\" .codex/skills -g \"SKILL.md\" | % { $_ -replace '.*[\\\\/]skills[\\\\/]([^\\\\/]+)[\\\\/]SKILL\\.md','$1' } | Sort-Object -Unique"], decision="allow")
prefix_rule(pattern=["C:\\Program Files\\PowerShell\\7\\pwsh.exe", "-Command", "rg --files-with-matches \"MUST use this before any creative work|before any creative work\" .codex/skills -g \"SKILL.md\" | % { $_ -replace '.*[\\\\/]skills[\\\\/]([^\\\\/]+)[\\\\/]SKILL\\.md','$1' } | Sort-Object -Unique"], decision="allow")
prefix_rule(pattern=["C:\\Program Files\\PowerShell\\7\\pwsh.exe", "-Command", "rg --files-with-matches \"\\.claude/skills|~\\/\\.claude\\/skills\" .codex/skills -g \"SKILL.md\" | % { $_ -replace '.*[\\\\/]skills[\\\\/]([^\\\\/]+)[\\\\/]SKILL\\.md','$1' } | Sort-Object -Unique"], decision="allow")
prefix_rule(pattern=["C:\\Program Files\\PowerShell\\7\\pwsh.exe", "-Command", "ls -Force .codex/skills/ui-ux-pro-max | Select-Object Name,Mode,LastWriteTime,Length"], decision="allow")
prefix_rule(pattern=["C:\\Program Files\\PowerShell\\7\\pwsh.exe", "-Command", "ls -Force .codex/skills/ui-ux-pro-max/scripts | Select-Object Name,Length,LastWriteTime | Sort-Object Name"], decision="allow")
prefix_rule(pattern=["C:\\Program Files\\PowerShell\\7\\pwsh.exe", "-Command", "rg -n \"pip install\" .codex/skills/pptx/SKILL.md | head"], decision="allow")
prefix_rule(pattern=["C:\\Program Files\\PowerShell\\7\\pwsh.exe", "-Command", "uv --help"], decision="allow")
prefix_rule(pattern=["C:\\Program Files\\PowerShell\\7\\pwsh.exe", "-Command", "uv pip --help"], decision="allow")
prefix_rule(pattern=["C:\\Program Files\\PowerShell\\7\\pwsh.exe", "-Command", "uv pip install --help"], decision="allow")
prefix_rule(pattern=["C:\\Program Files\\PowerShell\\7\\pwsh.exe", "-Command", "Rename-Item -Path .codex/skills/react -NewName react_docs; Rename-Item -Path .codex/skills/req-to-codex-prompt -NewName req-to-executable-prompt"], decision="allow")
prefix_rule(pattern=["C:\\Program Files\\PowerShell\\7\\pwsh.exe", "-Command", "ls -Force .codex/skills | Select-Object Name | Sort-Object Name | Select-String -Pattern \"react|req-to\""], decision="allow")
prefix_rule(pattern=["C:\\Program Files\\PowerShell\\7\\pwsh.exe", "-Command", "Get-Date -Format \"yyyy-MM-dd HH:mm:ss\""], decision="allow")
prefix_rule(pattern=["C:\\Program Files\\PowerShell\\7\\pwsh.exe", "-Command", "$dirs = Get-ChildItem .codex/skills -Directory; $skills = @(); foreach ($d in $dirs) { $skillFile = Join-Path $d.FullName 'SKILL.md'; if (Test-Path $skillFile) { $nameLine = (Get-Content $skillFile -TotalCount 20 | Where-Object { $_ -match '^name:' } | Select-Object -First 1); $descLine = (Get-Content $skillFile -TotalCount 40 | Where-Object { $_ -match '^description:' } | Select-Object -First 1); $skills += [pscustomobject]@{Dir=$d.Name; Name=($nameLine -replace '^name:\\s*','').Trim(); Description=($descLine -replace '^description:\\s*','').Trim() } } }; $skills.Count; $skills | Sort-Object Name | Select-Object -First 10 | Format-Table -AutoSize"], decision="allow")
